<div class="workout-session">
    <p-confirmdialog />


    <p-stepper [(value)]="activeStep" class="basis-[40rem]">
        <p-step-list>
            <ng-container *ngFor="let exercise of exercises; let index = index">
                <p-step [value]="index + 1" class="flex flex-row flex-auto gap-2">
                    <ng-template #content let-activateCallback="activateCallback" let-value="value">
                        <button class="step-button"
                                [ngClass]="{
                                'bg-primary text-primary-contrast border-primary': value === activeStep,
                                'border-surface': value > activeStep
                            }"
                                (click)="switchPanel(activateCallback)">
                            <span class="step-button-span">{{ index + 1 }}</span>
                        </button>
                    </ng-template>
                </p-step>
            </ng-container>
        </p-step-list>

        <p-step-panels>
            <ng-container *ngFor="let exercise of exercises; let index = index">
                <p-step-panel [value]="index + 1">
                    <ng-template #content let-activateCallback="activateCallback">
                        <div class="flex-1 flex-col gap-2 mx-auto" style="min-height: 16rem; max-width: 20rem">
                            <div class="text-center mt-4 mb-4 text-xl font-semibold">
                                <h3>{{ exercise.name | uppercase }}</h3>
                            </div>
                            <p-inputNumber [(ngModel)]="weight"
                                           [showButtons]="true"
                                           buttonLayout="horizontal"
                                           inputId="horizontal"
                                           spinnerMode="horizontal"
                                           [disabled]="timer.interval"
                                           [step]="1.25"
                                           [min]="0"
                                           [max]="500"
                                           [suffix]="' kg'">
                                <ng-container *ngIf="timer.interval !== 0">
                                    <ng-template #incrementbuttonicon>
                                        <span class="pi pi-plus"></span>
                                    </ng-template>
                                    <ng-template #decrementbuttonicon>
                                        <span class="pi pi-minus"></span>
                                    </ng-template>
                                </ng-container>
                            </p-inputNumber>
                        </div>
                    </ng-template>
                </p-step-panel>
            </ng-container>
        </p-step-panels>
    </p-stepper>

    <div *ngIf="exercisesMade.length > 0" class="card">
        <p-table [value]="exercisesMade" scrollable="true" scrollHeight="200px">
            <ng-template #header>
                <tr>
                    <th id="id">NÂ°</th>
                    <th id="weight">Poids</th>
                </tr>
            </ng-template>
            <ng-template #body let-exercise>
                <tr>
                    <td>{{ exercise.id }}</td>
                    <td>{{ exercise.weight }} kg</td>
                </tr>
            </ng-template>
        </p-table>
    </div>

    <div class="bottom-page">
        <div class="stopwatch text-primary">
            <span>{{ timer.text }}</span>
        </div>

        <p-button (click)="toggleTimer()"
                  [disabled]="!weight"
                  size="large"
                  [label]="timer.interval != null ? 'Stop' : 'Pause'" />
    </div>
</div>
